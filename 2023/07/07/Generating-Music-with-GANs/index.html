<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>
        Generating Music with GANs - RitzzzZ 
    </title>
     
    
<link rel="stylesheet" href="/css/grid.css">

    
<link rel="stylesheet" href="/css/custom.css">

    
<link rel="stylesheet" href="/css/ringo.css">

     
        <link rel="icon" type="image/x-icon" href="/img/icon.png " />
     
     
     
        <meta name=" " content="" />
     
        <meta name=" " content="" />
     
 
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>

  <body>
    <header id="header" class="clearfix" onclick="window.open('/', '_self')">
    <div class="site-name">
        <a href="/" id="logo" class="site-title">
            RitzzzZ
        </a>
        <p class="description site-description">
            <span style="padding-top:20px; font-size: 10px">
                An infinite journey
            </span>
        </p>
    </div>
</header>
<div id="sidebar" role="complementary">
    <section class="widget">
        <ul class="menu widget-list">
            
                <li class="menu-item">
                    <a href="/" class="menu-item-link">
                        Home
                    </a>
                </li>
                
                <li class="menu-item">
                    <a href="/about" class="menu-item-link">
                        About
                    </a>
                </li>
                
                <li class="menu-item">
                    <a href="/archives" class="menu-item-link">
                        Archives
                    </a>
                </li>
                
        </ul>
    </section>
    <section class="widget sidebar-foot">
        <ul class="widget-list">
            <li>Theme <a rel="nofollow" target="_blank" href="https://github.com/HeliumOI/hexo-theme-ringo">Ringo</a>
                by <a target="_blank" href="/ "> RitzzzZ  </a></li>
            <li>Proudly powered by  <a rel="nofollow" target="_blank" href="https://hexo.io/">Hexo</a></li>
        </ul>
    </section>
</div>

<div id="helpbar">
    <div class="back-to-top">
        <button id="back2top">↑</button>
        <script>
            back2top.onclick = function() {
                var movement = document.body.scrollTop || document.documentElement.scrollTop;
                scrollBy(0, -movement);
            }
        </script>
    </div>
</div>
      <main class="main">
        <div id="body">
          <div class="container">
            <div class="col-12" id="main" role="main">
    <article class="post post-atpost" itemscope itemtype="http://schema.org/BlogPosting">
        <div class="post-title">
            <h1 class="post-title post-title-atpage" itemprop="name headline">
                <a itemprop="url" href="/2023/07/07/Generating-Music-with-GANs/">
                    Generating Music with GANs
                </a>
            </h1>
        </div>
        <ul class="post-meta post-meta-atpage">
            <li class="post-time">
                2023-07-07
            </li>
            <li>
                <div class="article-category">
                    
                </div>
            </li>
        </ul>
        <div class="post-content" itemprop="articleBody">
            <blockquote>
<p>Notes for tutorial “<a target="_blank" rel="noopener" href="https://salu133445.github.io/ismir2019tutorial/">Generating Music with GANs—An Overview and Case Studies</a>” at ISMIR 2019</p>
</blockquote>
<h2 id="音乐生成研究简述"><a href="#音乐生成研究简述" class="headerlink" title="音乐生成研究简述"></a>音乐生成研究简述</h2><h3 id="音乐制作角度"><a href="#音乐制作角度" class="headerlink" title="音乐制作角度"></a>音乐制作角度</h3><ul>
<li>作曲（songwriting）：旋律，和弦，歌词</li>
<li>编曲（arranging）：器乐，结构</li>
<li>混音（mixing）：音色，平衡</li>
</ul>
<p>音乐人工智能的应用场景：</p>
<ul>
<li>激发音乐人的创作灵感</li>
<li>让每个人都可以制作音乐</li>
<li>为视频或游戏生产版权自由的音乐</li>
<li>音乐教育（比如自动伴奏）</li>
</ul>
<p>相关公司：参考<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/556608208">这篇文章</a></p>
<h3 id="深度学习的角度"><a href="#深度学习的角度" class="headerlink" title="深度学习的角度"></a>深度学习的角度</h3><ul>
<li>输入表示</li>
<li>模型<ul>
<li>基于规则的方法</li>
<li>基于连接的方法</li>
<li>基于机器学习的方法：VAE，GAN</li>
</ul>
</li>
<li>输出表示</li>
</ul>
<p>输入/输出表示</p>
<ul>
<li>符号输出：<strong>钢琴卷</strong>（类似图像），MIDI（类似文本），乐谱（混合）</li>
<li>音频输出：<strong>频谱</strong>（类似图像），波形</li>
</ul>
<h3 id="问题分类"><a href="#问题分类" class="headerlink" title="问题分类"></a>问题分类</h3><ul>
<li>从头开始生成：由某个输入得到旋律，钢琴卷或音频</li>
<li>条件生成：由旋律得到钢琴卷（伴奏），由钢琴卷得到音频（合成），由钢琴卷A得到钢琴卷B（重新编曲），由音频A得到音频B</li>
</ul>
<p>一些重要的工作：</p>
<ol>
<li>Symbolic melody generation: MidiNet [1], SSMGAN [2]</li>
<li>Arrangement generation: MuseGAN [3], BinaryMuseGAN [4], LeadSheetGAN [5]</li>
<li>Style transfer: CycleGAN [6], TimbreTron [7], Play-as-you-like [8], CycleBEGAN [9]</li>
<li>Audio generation: WaveGAN [10], GANSynth [11]</li>
</ol>
<blockquote>
<p>[1] “MidiNet: A convolutional GAN for symbolic-domain music generation,” ISMIR 2017<br>[2] “Modeling self-repetition in music generation using structured adversaries,” ML4MD 2019<br>[3] “MuseGAN: Multi-track sequential GANs for symbolic music generation and accompaniment,” AAAI 2018<br>[4] “Convolutional GANs with binary neurons for polyphonic music generation,” ISMIR 2018<br>[5] “Lead sheet generation and arrangement by conditional GAN,” ISMIR-LBD 2018<br>[6] “Symbolic music genre transfer with CycleGAN,” ICTAI 2018<br>[7] “TimbreTron: A WaveNet(CycleGAN(CQT(Audio))) pipeline for musical timbre transfer,” ICLR 2019<br>[8] “Play as You Like: Timbre-enhanced multi-modal music style transfer,” AAAI 2019<br>[9] “Singing style transfer using cycle-consistent boundary equilibrium GANs,” ICML workshop 2018<br>[10] “Adversarial audio synthesis,” ICLR 2019<br>[11] “GANSynth: Adversarial neural audio synthesis,” ICLR 2019  </p>
</blockquote>
<h2 id="GANs简介"><a href="#GANs简介" class="headerlink" title="GANs简介"></a>GANs简介</h2><p>训练生成模型的损失函数定义为对数损失函数。流向判别器的损失是将真实样本判断为假和将假样本判断为真。流向生成器的损失是被判别器判断为假的样本数，因为我们希望生成的样本尽可能让判别器认为是真的。</p>
<p><img src="GAN.png" alt="GAN"></p>
<p>不规范的GANs存在一些问题。判别器为生成器提供的梯度指出了改进方向。判别比生成简单，而判别器倾向于提供大梯度（在图像中体现为明显、急剧的颜色变化），导致生成器的训练不够稳定。常见的失败情况有模式损坏（mode collapse，被判断为假的区域中有一块缺失判断），模式缺失（missing modes，被判断为真的区域中有一块缺失判断）。</p>
<p>规范化的GANs：为生成器提供更光滑的引导，减轻mode collapse和missing modes问题。</p>
<p><a target="_blank" rel="noopener" href="https://colab.research.google.com/github/salu133445/ismir2019tutorial/blob/main/gan.ipynb#scrollTo=716vG6H-ldA7">demo: GAN for images （Google Colab)</a></p>
<h3 id="GANs-vs-VAEs"><a href="#GANs-vs-VAEs" class="headerlink" title="GANs vs VAEs"></a>GANs vs VAEs</h3><p><img src="GANvsVAE.png" alt="GANs vs VAEs"></p>
<h3 id="SOTA方法"><a href="#SOTA方法" class="headerlink" title="SOTA方法"></a>SOTA方法</h3><p>可以在<a target="_blank" rel="noopener" href="https://github.com/hindupuravinash/the-gan-zoo">这个网站</a>查看各种各样的GANs模型。</p>
<p><strong>BigGANs</strong>：在潜空间上插值。<a target="_blank" rel="noopener" href="https://colab.research.google.com/github/tensorflow/hub/blob/master/examples/colab/biggan_generation_with_tf_hub.ipynb">demo (Google Colab)</a></p>
<p><strong>Conditional GAN (CGAN)</strong>：对生成器和判别器都加上一个条件输入。</p>
<p><img src="cgan.png" alt="CGAN"></p>
<p><strong>pix2pix</strong>：用逐像素点的损失来监督。</p>
<p><img src="pix2pix.png" alt="pix2pix"></p>
<p><strong>Cycle-consistent GAN (CycleGAN)</strong>：用循环一致的损失来监督，用于image-to-image translation（比如风格迁移）。</p>
<p><img src="cyclegan.png" alt="cyclegan"></p>
<p>pix2pix和CycleGAN的损失计算方式如下图：</p>
<p><img src="cmp.png" alt="cmp"></p>
<h2 id="基于GANs的音乐生成方法举例"><a href="#基于GANs的音乐生成方法举例" class="headerlink" title="基于GANs的音乐生成方法举例"></a>基于GANs的音乐生成方法举例</h2><p>包含了很多数据集的Github仓库：<a target="_blank" rel="noopener" href="https://github.com/wayne391/symbolic-music-datasets">symbolic datasets collection</a></p>
<h3 id="符号旋律生成（Symbolic-melody-generation）"><a href="#符号旋律生成（Symbolic-melody-generation）" class="headerlink" title="符号旋律生成（Symbolic melody generation）"></a>符号旋律生成（Symbolic melody generation）</h3><p><strong>MidiNet</strong>：根据我们对音乐的理解来设计CNN核的大小。</p>
<p><strong>SSMGAN</strong>：用GAN生成一个自相似矩阵（SSM）表示音乐中的自我重复，改进全局音乐结构；然后用LSTM生成旋律。</p>
<p><img src="ssmgan.png" alt="ssmgan"></p>
<h3 id="编曲生成（Arrangement-generation）"><a href="#编曲生成（Arrangement-generation）" class="headerlink" title="编曲生成（Arrangement generation）"></a>编曲生成（Arrangement generation）</h3><p>挑战：</p>
<ul>
<li>随时间的变化：动态，情绪，紧张度等</li>
<li>结构：长结构很难生成</li>
<li>器乐：多个音轨，要考虑乐器的作用</li>
</ul>
<p>在真实世界的音乐中，这些元素以非常复杂的方式组织起来。</p>
<p>钢琴卷</p>
<p><img src="pianoroll.png" alt="pianoroll"></p>
<p>优点：</p>
<ol>
<li>非常好的符号化——用节拍来量化</li>
<li>很容易观察到重复、结构</li>
<li>不需要序列化复调创作</li>
</ol>
<p>缺点：</p>
<ol>
<li>存储效率低——大部分位置填充0，矩阵稀疏</li>
<li>抛开了音符的概念</li>
<li>很难处理演出级别的信息，除非使用高分辨率</li>
</ol>
<p><strong>MuseGAN</strong>：用不同类型的潜变量增强可控性。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">time dependent</th>
<th style="text-align:center">time independent</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">track dependent</td>
<td style="text-align:center">melody</td>
<td style="text-align:center">groove</td>
</tr>
<tr>
<td style="text-align:center">track independent</td>
<td style="text-align:center">chords</td>
<td style="text-align:center">style</td>
</tr>
</tbody>
</table>
</div>
<p><img src="musegan.png" alt="musegan"></p>
<h2 id="Current-limitations-amp-Future-research-directions"><a href="#Current-limitations-amp-Future-research-directions" class="headerlink" title="Current limitations &amp; Future research directions"></a>Current limitations &amp; Future research directions</h2>
             
        </div>
        
    </article>
    <div class="post-near">
    <div class="post-near-child post-near-child-left "> 
        
            <a href="/2023/07/06/PyTorch/">PyTorch补漏 &laquo; </a>
        
        <br /> Prev  &laquo;
    </div>
    <div class="post-near-child post-near-child-right">
        
            <a>None</a>
        
        <br /> &raquo; Next 
    </div>
</div>
</div>
             
<div id="comments">
     
</div>
 
            <footer id="footer" role="contentinfo">
    
        &copy; 2022 - 2023
        <br />
    
    
    <br />
    
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_value_site_pv">......</span> visits ·
        <span id="busuanzi_value_site_uv">......</span> visitors 
    
</footer>
          </div>
        </div>
      </main>
      <!-- highlight support -->

    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/styles/default.min.css">


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.1.0/build/highlight.min.js"></script>
 
<script>
        hljs.initHighlightingOnLoad();
</script>
 
<!-- prettify support -->

    
<link rel="stylesheet" href="/prettify/prettify.css">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/color-themes-for-google-code-prettify@2.0.4/dist/themes/tomorrow.min.css">


<script src="/prettify/prettify.js"></script>


<script>
    let prettifyel = document.querySelectorAll('pre');
    for (let i = 0; i < (prettifyel || []).length; i += 1) {
        prettifyel[i].classList.add('prettyprint');
        prettifyel[i].classList.add('linenums');
    }
    PR.prettyPrint();
</script>
 
<!-- mathjax support -->

    
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- fancybox support -->
 
<!-- viewerjs support -->

    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/viewerjs@1.10.0/dist/viewer.min.css">


<script src="https://cdn.jsdelivr.net/npm/viewerjs@1.10.0/dist/viewer.min.js"></script>

<script type="text/javascript">
    Viewer.setDefaults({
        zoomRatio: [0.5],
        show: function () {
            this.viewer.zoomTo(1);
        },
    });
    
    var imageList = document.querySelector('.post-content').getElementsByTagName('img');
    
    var imageArray = new Array();
    Array.prototype.forEach.call(imageList, element => {
        if (element.alt != "no-view" && element.className != "no-view") {
            imageArray.push(element);
        }
    });
    
    Array.prototype.forEach.call(imageArray, element => {
        var viewer1 = new Viewer(element);
        viewer1.images = imageArray;
        viewer1.length = imageArray.length;
    });
</script>
 
<!-- google analytics support -->



 
 

<!-- lazyload support -->

    
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.4.0/dist/lazyload.min.js"></script>

<script>
    new LazyLoad({
        elements_selector: '.post-content img'
    });
</script>
 
  </body>

</html>